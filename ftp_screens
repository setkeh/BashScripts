## 
#  Written By Setkeh setkeh <AT> gmail <DOT> com
#  Please Feel free to use this script modify and redistribute it,
#  but please leave a comment back to me :)
##

### 
#  How To Use This Script
#  Depends = Xmessage, xclip, wput.
#  1. Replace DIR=* with the path you want your screenshots folder.
#  2. Change the HTTP URL to the public folder on your FTP server. 
#     (If you have it configured correctly WITH NO TRAILING /)
#  3. Change the USER:PASS@IP To the information of your FTP Server.
#  4. ENJOY :)
#  ANY COMMENTS OR SUGGESTIONS AND FEEDBACK WELCOME
#  JOIN #linuxdistrocommunity ON FREENODE AND HILIGHT setkeh
###

 
DIR="${HOME}/screenshots"
HTTP_URL="http://screenshots.yourserver.com"
FTP_URL="ftp://user:pass@host/screenshot"

####################################
#                                  #  
#  DONOT EDIT PAST HERE UNLESS YOU #
#       KNOW WHAT YOUR DOING       #
#                                  #
####################################

LOG="${DIR}/screenshots.log"
DATE="$(date +%m.%d.%y-%H.%M.%S)"
SHORT_NAME="screenshot-${DATE}.png"
NAME="${DIR}/${SHORT_NAME}"
URL="${HTTP_URL}/${SHORT_NAME}"
# --Help Info
if [ "$1" = "--help" ]; then echo "
Usage <ftp_screens args>

 	win  = Select A Window Border With the Mouse.
	scr  = Take Screenshot of Entire Screen.
	area = MultiHead Display Support (1 Shot each Screen)
 			"; exit
 			fi
# Create the Directory If it Doesent Exist
if [ ! -d "${DIR}" ]; then mkdir "${DIR}"; fi 

# Select A Window Border With the Mouse
if [ "$1" = "win" ]; then scrot -sb "${NAME}"; fi

# Take Screenshot of entire Screen
if [ "$1" = "scr" ]; then scrot "${NAME}"; fi

# MultiHead Display Support (1 Shot each Screen)
if [ "$1" = "area" ]; then scrot -m "${NAME}"; fi

# Create the logfile for Screenshot names
echo "${NAME}" >> "${LOG}"

echo "Uploading ${URL}"
wput -m 644 -u "${NAME}" "${FTP_URL}/${SHORT_NAME}"
echo -n "${URL}" | xclip -selection c

xmessage -nearmouse "${URL}" &
